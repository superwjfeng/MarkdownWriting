

[为什么Lisp语言如此先进？（译文） - 阮一峰的网络日志 (ruanyifeng.com)](https://www.ruanyifeng.com/blog/2010/10/why_lisp_is_superior.html)

[LISP - 基本语法 - Lisp教程 (yiibai.com)](https://www.yiibai.com/lisp/lisp_basic_syntax.html)





[736. Lisp 语法解析 - 力扣（LeetCode）](https://leetcode.cn/problems/parse-lisp-expression/description/)



# LISP

LISP, LISt Processing language 是一种编程语言，它主要用于人工智能（AI）领域的研究。LISP语言 John McCarthy 在1958年设计，并且它是继FORTRAN之后第二古老的高级编程语言

多年来，已经发展出许多LISP方言，包括Common Lisp和Scheme等。这些方言在语法和功能上存在差异，但都保留了最初LISP设计的核心概念。尽管LISP不如一些现代语言流行，但它在某些领域（如AI研究）仍然具有重要地位，并且其独特的特性和设计理念影响了许多后来的编程语言

## *运行环境*

## *基本语法*

LISP语言的核心在于它简单而统一的语法。它主要由S-表达式（Symbolic Expressions）和原子构成，原子包括符号（symbols）、数字等基本数据类型。下面是对LISP语法的一个概览：

### S-表达式

S-表达式是用来表示数据和代码的基本结构。它们可以是原子或者由多个S-表达式组合而成的列表。

- **原子 atom**：最简单的S-表达式，例如数字`42`，字符串`"hello"`（string要用双引号 `""`），或者符号`foo`
- **列表 list**：由若干S-表达式组成且放置在圆括号内，如`(a b c)`

### 单引号

LISP计算一切，包括函数的参数和列表的成员。但有时候，我们需要采取原子或列表字面上，不希望他们求值或当作函数调用

要做到这一点，我们需要先原子或列表中带有单引号

### 列表和函数调用

LISP中的函数调用也表示为S-表达式。一个列表如果作为代码执行，则其第一个元素通常是函数或操作符，后续元素是该函数的参数。

例如，计算两数之和的表达式写作：`(＋ 3 4)`

这里的 `＋` 是函数名（在LISP中是一个符号），`3` 和 `4` 是它的参数。当这个S-表达式被求值时，会执行加法运算并返回结果 `7`。

### 特殊形式和函数定义

除了普通的函数调用，LISP也有几个特殊形式的构造，如用于条件判断的`if`，以及用于定义新函数的`defun`。

例如，定义一个加法函数的方式如下所示：

```lisp
(defun add (x y)
  (+ x y))
```

这里，`defun` 是一个特殊形式，用于定义函数 `add`，该函数接受两个参数 `x` 和 `y` 并返回它们的和。

### 条件表达式

条件表达式允许根据不同的条件执行不同的分支。最常见的条件表达式是`if`。

下面是使用`if`的一个例子：

```lisp
(if (> x 0)
    (print "x is positive")
    (print "x is non-positive"))
```

如果 `x` 大于 `0`，则打印 `"x is positive"`；否则，打印 `"x is non-positive"`。

### 宏（Macros）

LISP的宏系统允许用户扩展语言的语法，创建自己的特殊形式。宏看起来像函数调用，但是它们在编译时间进行代码转换，而不是在运行时求值。

### 示例程序

下面是一个简单的LISP程序示例，计算阶乘的一个函数：

```lisp
(defun factorial (n)
  (if (= n 0)
      1
      (* n (factorial (- n 1)))))
```

在这个函数中，如果 `n` 等于 `0`，就返回 `1`；否则，返回 `n` 乘以 `n-1` 的阶乘。

整体上，LISP的语法非常简洁，几乎所有的结构都可以表示为嵌套的S-表达式。这种设计使得LISP代码具有高度的灵活性，能够轻松地表示复杂的数据结构和算法。



# Scheme

Scheme是LISP编程语言家族的一个成员，它是由Guy L. Steele和Gerald Jay Sussman设计并首次介绍于1975年。Scheme的设计哲学强调极简主义，目的在于创建一个干净而高效的LISP方言，特别是在实现尾递归和闭包方面

与其他LISP方言类似，Scheme的语法非常简单，同样几乎全部建立在S-表达式之上。Scheme在教育界特别流行，经常被用来教授计算机科学和程序设计入门课程。此外，它也因其优雅的设计和强大的语言特性，被一些专业程序员用来进行软件原型设计和实验性项目开发

## *方言*

在编程语言的领域，**方言 dialect**指的是基于某个主要编程语言派生出来的具有相似性但又有一定区别的编程语言。方言通常保留了原始语言的核心特性和理念，同时引入了新的特性或者改变了部分现有特性以满足特定需求。

方言的产生可以由多种原因推动，包括但不限于：

1. **平台兼容性**: 某些方言可能针对特定操作系统或硬件平台进行优化。
2. **社区驱动**: 开发者社区可能会根据他们的特定需求对语言进行调整。
3. **实验特性**: 方言也可能是语言设计者引入新特性的试验场，用来探索语言设计的未来方向。
4. **教育目的**: 为了教学的简便性，可能会创建简化的版本，去除一些复杂的特性。
5. **历史遗留**: 随着时间的推移，语言的不同版本可能因标准化的缺乏而形成方言。

举例来说，在LISP编程语言家族中，Common Lisp和Scheme都是LISP语言的方言，它们继承了LISP的核心概念，如使用S-表达式表示代码和数据，以及强大的宏系统。然而，它们在语言特性、语法和实现上有所区别：Common Lisp较为复杂，拥有丰富的内置功能，而Scheme则注重简洁性，提供小巧且灵活的核心。

## *运行环境*

## *基本语法*

### 函数调用

Scheme中函数调用是通过将函数名和参数放置在一个列表中实现的。函数调用的通用格式如下：

```scheme
(function-name arg1 arg2 ... argN)
```

例如，计算两数之和的函数调用写作：`(＋ 3 4)`，会返回结果 `7`。

### 定义变量和函数

- **定义变量**: 使用 `define` 关键词可以创建新的变量并赋值。

  ```
  scheme复制代码(define x 10) ; 定义变量x并赋值为10
  ```

- **定义函数**: `define` 也用来定义函数，通常与 `lambda` 表达式一起使用。

  ```
  scheme复制代码(define (square x)
    (* x x))
  ```

### 特殊形式

Scheme中有一系列特殊形式，用于控制结构、变量绑定等功能。

- **条件判断**: 使用 `if` 和 `cond` 进行条件分支。

  ```
  scheme复制代码(if (> x 5)
      'greater
      'not-greater)
  
  (cond ((> x 5) 'greater)
        ((< x 5) 'lesser)
        (else 'equal))
  ```

- **Lambda表达式**: 创建匿名函数。

  ```
  scheme复制代码(lambda (x) (* x x))
  ```

- **Let绑定**: 在局部作用域内绑定变量。

  ```
  scheme复制代码(let ((x 2)
        (y 3))
    (+ x y))
  ```

### 宏定义

Scheme提供了强大的宏系统，允许用户定义自己的语法结构。

```
scheme复制代码(define-syntax my-when
  (syntax-rules ()
    ((my-when test expr ...)
     `(if ,test
           (begin
             ,@expr)))))
```

### 注释

- 单行注释使用分号 `;` 开头。
- 多行注释使用 `#|` 开始，`|#` 结束。