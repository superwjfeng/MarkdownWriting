# *C预处理器和C库*

<img src="DisassemblyProcess.jpg">

## *明示常量 Manifest constant: #define*

## *在#define中使用参数*

1. 用宏参数创建字符串：#运算符
2. 预处理器粘合剂：##运算符
3. 变参宏：...和__VA_ARGS__

## *宏和函数的选择*

### 宏和函数相比较的优点

1. 宏通常被用来进行较简单的计算
2. 函数的调用需要进行栈帧空间的开辟和销毁。调用一个简单函数所需要的栈空间的开辟和销毁所需要的内存和时间比其实际用于用于运算的内存和时间大得多
3. 更为重要的是函数的参数必须声明为特定的类型，所以函数只能在类型合适的表达式上使用，反之宏可以适用于任何的数据类型

### 宏和函数相比较的缺点

1. 每次使用宏的时候，一份宏定义的代码都会被插入到程序中。除非宏比较短，否则可能大幅度增加程序的长度
2. 宏是没法调试的
3. 宏由于类型无关，也就不够严谨
4. 宏可能会带来运算优先级的问题，程序容易出错

```c
//malloc()开辟动态内存
//1.一般方法，不方便多次开辟
int* p = (int*)malloc(10 * sizeof(int));

//2.预定义器进行替换
#define MALLOC(num, type) (type*)malloc(num * sizeof(type))

int* p2 = MALLOC(10, int);
char* p3 = MALLOC(20, char);
```

## **文件包括 #include**

## *其他指令*

1. #undef指令：#undef用于取消已有的#define指令。有时候为了安全起见，想使用一个名称但是不能确定前面是否已经用过的时候可以用#undef来取消
2. 条件编译
3. 预定义宏
4. #line和#error
5. #pragma
6. 泛型选择（C11）

## 内联函数（C99） Inline

## _Noretun函数（C11）

## 断言